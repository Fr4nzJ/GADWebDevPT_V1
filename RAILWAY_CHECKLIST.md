# Railway.com Deployment Checklist

## Pre-Deployment âœ“

- [ ] Code committed and pushed to GitHub
- [ ] `.env` file NOT committed (check `.gitignore`)
- [ ] All tests passing locally: `php artisan test`
- [ ] Database migrations created: `php artisan migrate`
- [ ] Assets built: `npm run build`
- [ ] No hard-coded sensitive data in code

## Railway Setup âœ“

### Account & Project
- [ ] Railway.com account created
- [ ] GitHub connected to Railway
- [ ] New project created and linked to repository
- [ ] Project name set (e.g., "GAD Website")

### Services Configuration
- [ ] PostgreSQL database service added
- [ ] Web service (PHP) automatically detected
- [ ] Services are connected (Railway auto-connects)

## Environment Variables âœ“

### Required (Must Set)
- [ ] `APP_ENV` = `production`
- [ ] `APP_DEBUG` = `false`
- [ ] `APP_KEY` = `base64:...` (generate locally with `php artisan key:generate --show`)
- [ ] `APP_URL` = `https://your-railway-domain.railway.app`
- [ ] `LOG_CHANNEL` = `stderr`

### Database (Auto-populated)
- [ ] `DB_CONNECTION` = `pgsql`
- [ ] `DB_HOST` = Set from PostgreSQL service
- [ ] `DB_PORT` = `5432`
- [ ] `DB_DATABASE` = Auto-set by Railway
- [ ] `DB_USERNAME` = Auto-set by Railway
- [ ] `DB_PASSWORD` = Auto-set by Railway

### Optional but Recommended
- [ ] `SESSION_DRIVER` = `database`
- [ ] `CACHE_DRIVER` = `database`
- [ ] `QUEUE_CONNECTION` = `database`
- [ ] Mail credentials (if using external service)

## Build Configuration âœ“

- [ ] Build command set:
  ```
  composer install --no-dev --optimize-autoloader && npm ci && npm run build && php artisan config:cache && php artisan route:cache
  ```

- [ ] Start command set:
  ```
  php artisan migrate --force && php artisan serve --host=0.0.0.0 --port=$PORT
  ```

- [ ] OR Procfile created with:
  ```
  web: php artisan serve --host=0.0.0.0 --port=$PORT
  release: php artisan migrate --force
  ```

## First Deployment âœ“

- [ ] Push code to GitHub: `git push origin main`
- [ ] Railway auto-detects changes
- [ ] Monitor "Deployments" tab
- [ ] Build stage completes (should show green checkmark)
- [ ] Deploy stage completes
- [ ] No errors in build logs

## Post-Deployment Verification âœ“

### Application Access
- [ ] Visit Railway domain in browser
- [ ] Page loads without errors
- [ ] No 500 errors in logs
- [ ] Static assets load (CSS, JavaScript)

### Database Connection
- [ ] Can access admin panel
- [ ] Program list loads from database
- [ ] News items display
- [ ] Events page shows real data
- [ ] Reports page displays

### Functionality Testing
- [ ] Admin login works
- [ ] Create new program (test form submission)
- [ ] Edit existing program
- [ ] Delete program (soft delete)
- [ ] View program details
- [ ] Public pages accessible without login
- [ ] Search/filter functionality works

### Storage & Uploads
- [ ] Image uploads work (if applicable)
- [ ] Uploaded files persist
- [ ] Files accessible via public URL

## Domain Setup âœ“ (Optional)

- [ ] Custom domain added in Railway Settings
- [ ] DNS records updated (wait 24-48 hours):
  ```
  CNAME record pointing to Railway domain
  ```
- [ ] SSL certificate auto-generated
- [ ] Access application via custom domain
- [ ] All links use custom domain URL

## Monitoring âœ“

- [ ] Set up log monitoring
  - [ ] Check Deployments â†’ View Logs regularly
  - [ ] Look for errors or warnings
  - [ ] Monitor error rate

- [ ] Set up alerts (optional)
  - [ ] High CPU usage alert
  - [ ] Deployment failure alert
  - [ ] Email notifications enabled

- [ ] Regular health checks
  ```bash
  # Can add to cron job or monitor externally
  curl https://your-domain.railway.app/health
  ```

## Maintenance âœ“

- [ ] Review environment variables monthly
- [ ] Check disk usage (view storage status)
- [ ] Keep dependencies updated (in GitHub)
- [ ] Railway auto-deploys on GitHub push
- [ ] Backup database regularly (Railway auto-backups)

## Security Checklist âœ“

- [ ] APP_DEBUG is `false` (never `true` in production)
- [ ] APP_KEY is strong (generated by Laravel)
- [ ] Database password is strong
- [ ] HTTPS enforced (automatic on Railway)
- [ ] Session cookie is secure
  ```
  SESSION_SECURE=true
  SESSION_HTTP_ONLY=true
  ```
- [ ] CORS properly configured
- [ ] Rate limiting enabled on forms
- [ ] No console.log or debug code in production

## Backups âœ“

- [ ] PostgreSQL auto-backups enabled (default)
  - [ ] Check: Services â†’ PostgreSQL â†’ Backups
  - [ ] Daily backups available
  - [ ] Weekly backups available
  - [ ] Monthly backups available

- [ ] Test restore from backup (before issues occur)
  ```bash
  # Manually export database
  pg_dump -h $DB_HOST -U $DB_USERNAME -d $DB_DATABASE > backup.sql
  ```

- [ ] Keep production data secure
  - [ ] No personal data in logs
  - [ ] No passwords in error messages
  - [ ] Sanitize user data before storage

## Performance Monitoring âœ“

- [ ] Check Railway billing/usage
  - [ ] CPU usage reasonable
  - [ ] Memory usage under control
  - [ ] Network bandwidth expected

- [ ] Application response times good
  - [ ] Homepage loads in < 2 seconds
  - [ ] Admin pages load in < 1 second
  - [ ] No 502/503 errors

- [ ] Database performance
  - [ ] Queries complete quickly
  - [ ] No slow queries in logs
  - [ ] Query optimization if needed

## Rollback Procedure âœ“

- [ ] Know how to rollback if needed
  1. Deployments tab
  2. Select previous working deployment
  3. Click "Rollback"
  4. App reverts to previous version
  
- [ ] Test rollback procedure (optional)
  - [ ] Break something intentionally
  - [ ] Confirm rollback works
  - [ ] Fix the issue
  - [ ] Redeploy

## Production Readiness âœ“

- [ ] Application stability tested
- [ ] All critical features working
- [ ] Error handling implemented
- [ ] Logging comprehensive
- [ ] Performance acceptable
- [ ] Security measures in place
- [ ] Backups working
- [ ] Monitoring active
- [ ] Documentation updated

## Communication âœ“

- [ ] Team notified of production URL
- [ ] Documentation in README updated
- [ ] Users informed of launch
- [ ] Support contact information provided
- [ ] Issue tracking set up on GitHub

## Ongoing Maintenance âœ“

### Weekly
- [ ] Check application logs for errors
- [ ] Monitor error rate
- [ ] Review new GitHub issues

### Monthly
- [ ] Update dependencies (composer, npm)
- [ ] Review security bulletins
- [ ] Check backup status
- [ ] Verify disk space usage

### Quarterly
- [ ] Performance review
- [ ] Security audit
- [ ] Database optimization
- [ ] Cost analysis

## Quick Troubleshooting Reference

### If deployment fails:
1. Check build logs: `Deployments â†’ Failed â†’ View Logs`
2. Verify all env variables set
3. Ensure Dockerfile is valid
4. Check composer.json syntax

### If application crashes:
1. Check deployment logs
2. Verify database connection
3. Check APP_KEY format (must start with `base64:`)
4. Review error logs

### If database won't connect:
1. Verify PostgreSQL service exists
2. Check environment variables populated from service
3. Run: `php artisan tinker` â†’ `DB::connection()->select('SELECT 1')`

### If slow performance:
1. Check railway resource usage
2. Upgrade instance size if needed
3. Optimize database queries
4. Enable caching

## Success Indicators âœ“

- [ ] Application loading without 500 errors
- [ ] Database queries executing successfully
- [ ] All pages rendering correctly
- [ ] Admin features functioning properly
- [ ] User authentication working
- [ ] Forms submitting successfully
- [ ] Images/uploads working (if applicable)
- [ ] Static assets loading
- [ ] Email working (if configured)
- [ ] No warnings in browser console
- [ ] No errors in application logs
- [ ] Performance acceptable (< 2s page loads)

---

## Final Verification

Before considering deployment complete:

âœ… **All checks above marked complete**
âœ… **Application tested in production**
âœ… **No critical errors in logs**
âœ… **Team can access application**
âœ… **Backups verified working**
âœ… **Documentation updated**

---

**Deployment to Railway.com is complete! ðŸš€**

For detailed instructions, see [RAILWAY_DEPLOYMENT.md](./RAILWAY_DEPLOYMENT.md).
