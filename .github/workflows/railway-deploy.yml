name: Railway Deployment

on:
  push:
    branches: [ main ]
  workflow_dispatch:

jobs:
  deploy-railway:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v3

      - name: Deploy to Railway
        uses: xano/github-action@v2
        env:
          RAILWAY_TOKEN: ${{ secrets.RAILWAY_TOKEN }}
        with:
          args: up

  notify-deployment:
    runs-on: ubuntu-latest
    if: always()
    
    steps:
      - name: Notify Deployment Status
        run: |
          if [ "${{ job.status }}" == "success" ]; then
            echo "✅ Deployment to Railway successful!"
            echo "Access your app at: https://your-railway-domain.railway.app"
          else
            echo "❌ Deployment failed. Check Railway dashboard for details."
          fi
